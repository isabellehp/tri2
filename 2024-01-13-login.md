---
layout: base
title: Login
permalink: /login/
--- 


<style>
    h1 {
        text-align: center;
        color: #333;
    }
    .conta {
        background-color: #d69092;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    form {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    label {
        color: #fff;
        margin-bottom: 8px;
    }
    input {
        padding: 8px;
        margin-bottom: 16px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    input[type="submit"] {
        background-color: #3498db;
        color: #fff;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    input[type="submit"]:hover {
        background-color: #2980b9;
    }
    #userDisplayName {
        text-align: center;
        margin-top: 20px;
        color: #333;
    }
    #updateButton {
        display: none;
        background-color: #2ecc71;
        color: #fff;
        padding: 8px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 10px;
    }
    #updateButton:hover {
        background-color: #27ae60;
    }
</style>
<body>
<div class="container" id="animation">
    <h1>Login</h1>
    <form id='loginForm'>
        <label for="uid">Username:</label>
        <input type="text" id="uid" name="uid" required><br>        
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br>       
        <input type="submit" value="Login">
            <a href="{{site.baseurl}}/__"></a>
    </form>
</div>
<div id="userDisplayName"></div>
<button id="updateButton">Update</button>
</body>

<script>
    document.getElementById('loginForm').addEventListener
    ('submit', function(event)
        event.preventDefault(); // Prevent form submission
        const uid = document.getElementById('uid').value;
        const password = document.getElementById('password').value;
        const loginData = {
            uid: uid,
            password: password
        };
        const apiUrl = "http://127.0.0.1:8086/api/users/"
        function fetchUsers() 
        {
            fetch(apiUrl, authOptions)
                .then((response) => response.json())
                .then((response) => users = response);
        }
        fetch({
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(loginData)
        })
        .then 
        (
            response => {
            if (response.ok) 
            {
                if(response.status === 401)
                    window.location.href = "{{site.baseurl}}/401.html"
                } else if (response.status === 403) {
                    window.location.href = "{{site.baseurl}}/403.html";
                } else if (response.status === 404) {
                    window.location.href = "{{site.baseurl}}/404.html";
                } else {
                    const errorMsg = "Login failed: " + response.status;
                    console.log(errorMsg);
                }
                return;
            }
            winsow.location.href = "{{site.baseurl}}/data/database";
        )
        .then(data => {
            const token = data.token;
            const loggedInUserName = data.data.user.name;
            const loggedInUserId = data.data.user.id;
            console.log(loggedInUserName);
            console.log(data.token);
            localStorage.setItem('loggedInUserName', loggedInUserName);
            localStorage.setItem('loggedInUserId', loggedInUserId);
            document.getElementById('userDisplayName').textContent = `Welcome, ${loggedInUserName}!`;
            document.getElementById('loginForm').style.display = 'none';
            const userIDFromLocalStorage = localStorage.getItem('loggedInUserId');
            console.log(userIDFromLocalStorage);
            document.getElementById('updateButton').style.display = 'block';
        })
        .catch(error => {
            console.error('Error:', error.message);
            alert(error.message);
        });
        document.getElementById('updateButton').addEventListener('click', function() {
            window.location.href = '/tri2/update/';
        });
    )
</script>
<script src="{{site.baseurl}}/assets/js/three.r134.min.js"></script>
<script src="{{site.baseurl}}/assets/js/vanta.clouds.min.js"></script>

<script>
  

VANTA.CLOUDS ({
  el: "#animation",
  mouseControls: true,
  touchControls: true,
  gyroControls: false,
  skyColor: 0xf9d1d1,
  cloudColor: 0xbba2a8,
  cloudShadowColor: 0x905167,
  sunColor: 0x845d66,
  sunGlareColor: 0x5e2610,
  speed: 0.80
})
</script>